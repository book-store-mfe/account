(self.webpackChunkaccount=self.webpackChunkaccount||[]).push([[205,603],{205:(h,M,e)=>{e.r(M),e.d(M,{LoginComponent:()=>L});var t=e(2950),r=e(1014),E=e(4404),_=e(5986),u=e(5962),c=e(7584),C=e(3729),m=e(6603);function l(i,O){if(1&i&&(t.\u0275\u0275elementStart(0,"mat-error"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(n.errorMessage())}}function P(i,O){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"form",2),t.\u0275\u0275listener("submit",function(g){t.\u0275\u0275restoreView(n);const I=t.\u0275\u0275nextContext();return g.preventDefault(),t.\u0275\u0275resetView(I.signInSubmit())}),t.\u0275\u0275elementStart(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),t.\u0275\u0275text(4,"E-mail"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(5,"input",5),t.\u0275\u0275template(6,l,2,1,"mat-error"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(7,"div",3)(8,"button",6),t.\u0275\u0275text(9,"Entrar"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",3)(11,"div"),t.\u0275\u0275text(12," N\xe3o tem uma conta? "),t.\u0275\u0275elementStart(13,"button",7),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const g=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(g.enterSignUpMode())}),t.\u0275\u0275text(14,"Criar conta"),t.\u0275\u0275elementEnd()()()()}if(2&i){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("formControl",n.emailControl),t.\u0275\u0275advance(),t.\u0275\u0275conditional(n.emailControl.invalid?6:-1)}}function D(i,O){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1),t.\u0275\u0275element(1,"app-account-form"),t.\u0275\u0275elementStart(2,"div",3)(3,"button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const g=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(g.signUp())}),t.\u0275\u0275text(4,"Cadastro"),t.\u0275\u0275elementEnd()()()}}let L=(()=>{class i{auth=(0,t.inject)(C.AuthService);router=(0,t.inject)(c.Router);state=(0,t.inject)(C.ProfileStateService);emailControl=new r.FormControl("",[r.Validators.required]);signUpMode=(0,t.signal)(!1);errorMessage(){const n=this.emailControl.errors;return n?.required?"E-mail \xe9 obrigatorio":n?.invalidLogin?"Login inv\xe1lido":""}signInSubmit(){if(this.emailControl.invalid)return void this.emailControl.markAsTouched();const n=this.auth.signIn(this.emailControl.value);n?(this.state.name.set(n.name),this.state.email.set(n.email),this.router.navigate(["/"])):this.emailControl.setErrors({invalidLogin:!0})}enterSignUpMode(){this.signUpMode.set(!0)}signUp(){if(!this.state.name()||!this.state.email())return;this.auth.signUp(this.state.name(),this.state.email());const n=this.auth.signIn(this.state.email());n&&(this.state.name.set(n.name),this.state.email.set(n.email),this.router.navigate(["/"]))}static \u0275fac=function(p){return new(p||i)};static \u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-login"]],decls:3,vars:1,consts:[[1,"content"],[1,"content__rows"],[1,"content__rows",3,"submit"],[1,"content__row"],[1,"width-100"],["matInput","","placeholder","",3,"formControl"],["mat-flat-button","",1,"width-100"],["mat-button","","type","button",3,"click"],["mat-flat-button","",1,"width-100",3,"click"]],template:function(p,g){1&p&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,P,15,2,"form",1)(2,D,5,0,"div",1),t.\u0275\u0275elementEnd()),2&p&&(t.\u0275\u0275advance(),t.\u0275\u0275conditional(g.signUpMode()?2:1))},dependencies:[r.ReactiveFormsModule,r.\u0275NgNoValidate,r.DefaultValueAccessor,r.NgControlStatus,r.NgControlStatusGroup,r.FormControlDirective,_.MatFormFieldModule,_.MatFormField,_.MatLabel,_.MatError,u.MatInputModule,u.MatInput,E.MatButtonModule,E.MatButton,m.AccountFormComponent],styles:[".content[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;width:350px;margin:0 auto}.content__rows[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:8px}.content__row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}.width-100[_ngcontent-%COMP%]{width:100%}"]})}return i})()},467:(h,M,e)=>{function t(r,a,E,s,_,d,u){try{var f=r[d](u),c=f.value}catch(v){return void E(v)}f.done?a(c):Promise.resolve(c).then(s,_)}function o(r){return function(){var a=this,E=arguments;return new Promise(function(s,_){var d=r.apply(a,E);function u(c){t(d,s,_,u,f,"next",c)}function f(c){t(d,s,_,u,f,"throw",c)}u(void 0)})}}e.d(M,{A:()=>o})},6603:(h,M,e)=>{e.r(M),e.d(M,{AccountFormComponent:()=>v});var t=e(467),o=e(2950),a=e(1014),s=e(5986),d=e(5962),f=e(3729);let v=(()=>{class C{profile=(0,o.inject)(f.ProfileStateService);form=new a.FormGroup({name:new a.FormControl(""),email:new a.FormControl("")});ngOnInit(){var m=this;return(0,t.A)(function*(){try{m.form.patchValue({name:m.profile.name(),email:m.profile.email()}),m.form.controls.name.valueChanges.subscribe(l=>{l&&m.profile.name.set(l)}),m.form.controls.email.valueChanges.subscribe(l=>{l&&m.profile.email.set(l)})}catch(l){console.log("load error",{err:l})}})()}static \u0275fac=function(l){return new(l||C)};static \u0275cmp=o.\u0275\u0275defineComponent({type:C,selectors:[["app-account-form"]],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","name","placeholder",""],["matInput","","formControlName","email","placeholder",""]],template:function(l,P){1&l&&(o.\u0275\u0275elementStart(0,"form",0)(1,"p")(2,"mat-form-field")(3,"mat-label"),o.\u0275\u0275text(4,"Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(6,"p")(7,"mat-form-field")(8,"mat-label"),o.\u0275\u0275text(9,"E-mail"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(10,"input",2),o.\u0275\u0275elementEnd()()()),2&l&&o.\u0275\u0275property("formGroup",P.form)},dependencies:[s.MatFormFieldModule,s.MatFormField,s.MatLabel,d.MatInputModule,d.MatInput,a.ReactiveFormsModule,a.\u0275NgNoValidate,a.DefaultValueAccessor,a.NgControlStatus,a.NgControlStatusGroup,a.FormGroupDirective,a.FormControlName],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{max-width:350px;width:100%}"]})}return C})()}}]);